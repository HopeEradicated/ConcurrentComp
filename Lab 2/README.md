# Линейная алгебра

## Запуск

```ps
./make.sh <number_of_threads> <1rst matrix rows> <1rst matrix cols>
```

## Алгоритмы для умножения матрицы на вектор, используя разбиение по строкам, по столбцам и по блокам

### Описание задачи

В качестве входнных данных подаются матрица *A* и вектор *B*, которые будут умножаться друг на друга, а также количество процессов *number_of_threads*.
Результатом работы будет вектор *C*=*A*\**B*

### Разбиение по строкам

- Сначала нужно разбить матрицу A на блоки по строкам и каждый кусок передать своему процессу с помощью MPI.Scatter
- Вектор *B* передаётся полностью с помощью MPI_Bcast
- Каждый процесс вычисляет свой блок матрицы C
- Полученные блоки матрицы *C* собираются с помощью *MPI_Gather*

> Матрица, Размер - 1000x1000:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 2           | 1.99      | 0.99          |
| 4           | 2.25      | 0.56          |
| 5           | 4.77      | 0.95          |

> Матрица, Размер - 5000x5000:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 2           | 2.22      | 1.11          |
| 4           | 2.89      | 0.72          |
| 5           | 3.04      | 0.68          |

> Матрица, Размер - 10000x10000:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 2           | 2.01      | 1.01          |
| 4           | 2.69      | 0.67          |
| 5           | 3.10      | 0.62          |

### Разбиение по столбцам

- Вектор *B* разбивается на блоки и каждый кусок передаётся процессу с помощью *MPI.Scatter*
- Матрица *A* передаётся целиком с помощью *MPI_Bcast*
- Каждый процесс вычисляет свою матрицу *local_C*, размерность которой совпадает с итоговой матрицей *C*
- Полученные матрицы *local_C* суммируются с помощью *MPI_Reduce*

> Матрица, Размер - 1000x1000:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 2           | 1.95      | 0.98          |
| 4           | 2.48      | 0.62          |
| 5           | 3.53      | 0.71          |

> Матрица, Размер - 5000x5000:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 2           | 2.05      | 1.02          |
| 4           | 2.76      | 0.69          |
| 5           | 2.81      | 0.56          |

> Матрица, Размер - 10000x10000:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 2           | 1.97      | 0.98          |
| 4           | 3.05      | 0.87          |
| 5           | 3.93      | 0.78          |

### Разбиение по блокам

- Матрица *A* разбивается на блоки и каждый блок передаётся соответствующему процессу с помощью *MPI_Send*/*MPI_Recv*
- Вектор *B* передаётся полностью с помощью MPI_Bcast
- Каждый процесс вычисляет свою матрицу *local_C*, размерность которой совпадает с итоговой матрицей *C*
- Полученные матрицы *local_C* суммируются с помощью *MPI_Reduce*

> Матрица, Размер - 1000x1000:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 2           | 1.42      | 0.71          |
| 4           | 2.09      | 0.52          |
| 5           | 4.91      | 0.98          |

> Матрица, Размер - 5000x5000:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 2           | 1.59      | 0.79          |
| 4           | 2.30      | 0.57          |
| 5           | 4.71      | 0.94          |

> Матрица, Размер - 10000x10000:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 2           | 2.02      | 1.01          |
| 4           | 2.81      | 0.70          |
| 5           | 3.91      | 0.78          |

## Алгоритм Кэннона

### Описание алгоритма

Параллельный алгоритм Кэнона это алгоритм, который используется для перемножения матриц, в идеальном случае он работает за O(n).

Алгоритм представляет собой разделение матриц на блоки в соответствии с количеством процессов для последующего перемножения соответствующих блоков.
Начальное расположение блоков в алгоритме Кэннона подбирается таким образом, чтобы блоки в подзадачах могли бы быть перемножены без каких-либо дополнительных передач данных. При этом подобное распределение блоков может быть организовано таким образом, что перемещение блоков между подзадачами в ходе вычислений может осуществляться с использованием более простых коммуникационных операций.

### Описание задачи

В качестве входнных данных подаются квадратные матрицы *A* и *B*, которые будут умножаться друг на друга, а также количество процессов *number_of_threads*.
Результатом работы программы должна быть матрица *C*=*A*\**B*

**Важно!** *number_of_threads* должен быть квадратом любого числа, чтобы выполнялось условие: размер матрицы должен быть кратен квадратному корню от *number_of_threads*, чтобы матрицы делились на блоки корректно.

### Оценка качества

 > Матрица, Размер - 128x128:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 4           | 2.93      | 0.73          |

> Матрица, Размер - 512x512:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 4           | 3.35      | 0.83          |

> Матрица, Размер - 1024x1024:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 4           | 3.19      | 0.79          |

> Матрица, Размер - 2048x2048:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 4           | 3.25      | 0.81          |

> Матрица, Размер - 4096x4096:

| N процессов | Ускорение | Эффективность |
|-------------|-----------|---------------|
| 1           | 1         | 1             |
| 4           | 3.29      | 0.82          |
